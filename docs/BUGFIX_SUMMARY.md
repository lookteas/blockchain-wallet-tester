# ç½‘ç»œè¿æ¥é—®é¢˜ä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°

åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œç¨‹åºåœ¨æ‰§è¡Œè½¬è´¦æ“ä½œæ—¶ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š

```
è·å–Gasä»·æ ¼å¤±è´¥: net/http: nil Context
```

è¿™æ˜¯å› ä¸ºGoçš„ä»¥å¤ªåŠå®¢æˆ·ç«¯åº“éœ€è¦æ­£ç¡®çš„contextå‚æ•°æ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚

## é—®é¢˜åŸå› 

1. **ç¼ºå°‘Contextå‚æ•°**: ä»¥å¤ªåŠå®¢æˆ·ç«¯çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½éœ€è¦contextå‚æ•°
2. **ç½‘ç»œè¯·æ±‚å¤±è´¥**: æ²¡æœ‰contextçš„ç½‘ç»œè¯·æ±‚ä¼šè¿”å›nil contexté”™è¯¯
3. **åŠŸèƒ½å—é™**: å¯¼è‡´è½¬è´¦ã€ä½™é¢æŸ¥è¯¢ç­‰åŠŸèƒ½æ— æ³•æ­£å¸¸å·¥ä½œ

## ä¿®å¤å†…å®¹

### 1. é’±åŒ…ç®¡ç†å™¨ä¿®å¤

**æ–‡ä»¶**: `internal/wallet/manager.go`

- `GetBalance()`: æ·»åŠ contextå‚æ•°
- `GetGasPrice()`: æ·»åŠ contextå‚æ•°
- `EstimateGas()`: æ·»åŠ contextå‚æ•°

```go
// ä¿®å¤å‰
balance, err := m.client.BalanceAt(nil, address, nil)

// ä¿®å¤å
ctx := context.Background()
balance, err := m.client.BalanceAt(ctx, address, nil)
```

### 2. è½¬è´¦å‘½ä»¤ä¿®å¤

**æ–‡ä»¶**: `internal/commands/send.go`

- `executeTransfer()`: æ·»åŠ contextå‚æ•°
- æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½ä½¿ç”¨æ­£ç¡®çš„context

```go
// ä¿®å¤å‰
nonce, err := wm.GetClient().PendingNonceAt(nil, from)

// ä¿®å¤å
ctx := context.Background()
nonce, err := wm.GetClient().PendingNonceAt(ctx, from)
```

### 3. æ‰¹é‡è½¬è´¦ä¿®å¤

**æ–‡ä»¶**: `internal/commands/batch.go`

- `executeSingleTransfer()`: æ·»åŠ contextå‚æ•°
- ç¡®ä¿æ‰¹é‡è½¬è´¦ä¸­çš„ç½‘ç»œè¯·æ±‚æ­£å¸¸

## ä¿®å¤ç»“æœ

### âœ… åŠŸèƒ½éªŒè¯

1. **ä½™é¢æŸ¥è¯¢**: æ­£å¸¸å·¥ä½œ

   ```bash
   ./transfer-tool balance
   # è¾“å‡º: æ­£å¸¸æ˜¾ç¤ºé’±åŒ…ä½™é¢
   ```
2. **å•ç¬”è½¬è´¦**: æ­£å¸¸å·¥ä½œ

   ```bash
   ./transfer-tool send <åœ°å€> <é‡‘é¢>
   # è¾“å‡º: æ­£å¸¸æ˜¾ç¤ºè½¬è´¦ä¿¡æ¯å’ŒGasä»·æ ¼
   ```
3. **æ‰¹é‡è½¬è´¦**: æ­£å¸¸å·¥ä½œ

   ```bash
   ./transfer-tool batch --config configs/config_with_env.yaml
   # è¾“å‡º: æ­£å¸¸æ‰§è¡Œæ‰¹é‡è½¬è´¦
   ```

### ğŸ”§ æŠ€æœ¯æ”¹è¿›

1. **ç½‘ç»œç¨³å®šæ€§**: æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½ä½¿ç”¨æ­£ç¡®çš„context
2. **é”™è¯¯å¤„ç†**: æä¾›æ›´æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
3. **ä»£ç è´¨é‡**: éµå¾ªGoè¯­è¨€æœ€ä½³å®è·µ

## æµ‹è¯•éªŒè¯

### 1. åŸºæœ¬åŠŸèƒ½æµ‹è¯•

```bash
# æŸ¥çœ‹ä½™é¢
./transfer-tool balance
# âœ… æˆåŠŸ: æ˜¾ç¤ºé’±åŒ…ä½™é¢

# æŸ¥çœ‹ä¸»ç½‘ä½™é¢  
./transfer-tool --network mainnet balance
# âœ… æˆåŠŸ: æ˜¾ç¤ºä¸»ç½‘ä½™é¢

# å•ç¬”è½¬è´¦
./transfer-tool send 0xa435C625AD3E5f07f4f190116b731c8beab1549E 0.1
# âœ… æˆåŠŸ: æ˜¾ç¤ºè½¬è´¦ä¿¡æ¯å’ŒGasä»·æ ¼
```

### 2. ç½‘ç»œè¿æ¥æµ‹è¯•

- âœ… Sepoliaæµ‹è¯•ç½‘: è¿æ¥æ­£å¸¸
- âœ… ä¸»ç½‘: è¿æ¥æ­£å¸¸
- âœ… BSCé“¾: è¿æ¥æ­£å¸¸
- âœ… Polygoné“¾: è¿æ¥æ­£å¸¸

### 3. ç¯å¢ƒå˜é‡æµ‹è¯•

- âœ… è‡ªåŠ¨åŠ è½½.envæ–‡ä»¶
- âœ… RPCé…ç½®æ­£å¸¸å·¥ä½œ
- âœ… APIå¯†é’¥é…ç½®æ­£å¸¸å·¥ä½œ
